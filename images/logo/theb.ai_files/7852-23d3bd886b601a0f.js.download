(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7852],{98553:function(e,t){"use strict";t.Z={src:"/_next/static/media/hi.77b51852.svg",height:142,width:142,blurWidth:0,blurHeight:0}},57113:function(e,t,l){"use strict";var s=l(85893),a=l(67294),r=l(20154);let n=e=>{let{content:t}=e,[l,n]=(0,a.useState)(null),i=e=>{n(e.currentTarget)},o=()=>{n(null)},c=!!l;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"ml-1","aria-owns":c?"mouse-over-popover":void 0,"aria-haspopup":"true",onMouseEnter:i,onMouseLeave:o,onClick:i,children:(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",className:"w-5 h-5 text-n-9",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.25 11.25l.041-.02a.75.75 0 011.063.852l-.708 2.836a.75.75 0 001.063.853l.041-.021M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9-3.75h.008v.008H12V8.25z"})})}),(0,s.jsx)(r.ZP,{id:"mouse-over-popover",sx:{pointerEvents:"none"},open:c,anchorEl:l,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},onClose:o,disableRestoreFocus:!0,children:(0,s.jsx)("div",{className:"p-2 w-80",children:t})})]})};t.Z=n},9892:function(e,t,l){"use strict";var s=l(85893),a=l(67294),r=l(25675),n=l.n(r);let i=e=>{let{className:t,...l}=e,[r,i]=(0,a.useState)(!1);return(0,s.jsx)(n(),{className:"inline-block align-top opacity-0 transition-opacity ".concat(r&&"opacity-100"," ").concat(t),onLoadingComplete:()=>i(!0),...l})};t.Z=i},29492:function(e,t,l){"use strict";l.d(t,{Z:function(){return ew}});var s=l(85893),a=l(67294),r=l(41664),n=l.n(r),i=l(66180),o=l(76265),c=l(9008),d=l.n(c),m=l(1852),u=l.n(m),h=l(20104),x=l(44319),g=l(11163);let p=e=>{let{visible:t,items:l}=e,a=(0,g.useRouter)();return(0,s.jsx)("div",{className:"".concat(t&&"px-2"),children:l.map((e,l)=>e.url?(0,s.jsxs)(n(),{className:(0,i.m)("flex items-center h-12 base2 font-semibold text-n-3/75 rounded-lg transition-colors hover:text-n-1 ".concat(a.pathname===e.url&&"text-n-1 bg-gradient-to-l from-[#323337] to-[rgba(70,79,111,0.3)] shadow-[inset_0px_0.0625rem_0_rgba(255,255,255,0.05),0_0.25rem_0.5rem_0_rgba(0,0,0,0.1)]"," ").concat(t?"px-3":"px-5")),href:e.url||"/",passHref:!0,children:[(0,s.jsx)(x.Z,{className:e.color,name:e.icon}),!t&&(0,s.jsx)("div",{className:"ml-5",children:e.title})]},l):"Image"===e.title?(0,s.jsxs)("button",{className:"flex items-center w-full h-12 base2 font-semibold text-n-3/75 rounded-lg transition-colors hover:text-n-1 ",onClick:e.onClick,children:[(0,s.jsx)(x.Z,{className:e.color,name:e.icon}),!t&&(0,s.jsx)("div",{className:"ml-5",children:e.title})]},l):(0,s.jsxs)("button",{className:"flex items-center w-full h-12 base2 font-semibold text-n-3/75 rounded-lg transition-colors hover:text-n-1 ".concat(t?"px-3":"px-5"),onClick:e.onClick,children:[(0,s.jsx)(x.Z,{className:e.color,name:e.icon}),!t&&(0,s.jsx)("div",{className:"ml-5",children:e.title}),"Search"===e.title&&!t&&(0,s.jsx)("div",{className:"ml-auto px-2 rounded-md bg-n-4/50 caption1 font-semibold text-n-3",children:"⌘ F"})]},l))})};var b=l(9892),f=l(26970),v=l(78270);let j=e=>{let{buttons:t,value:l,setValue:a}=e,r=e=>{a(e)};return t.map((e,t)=>e.bigTitle?(0,s.jsx)("div",{className:"font-semibold text-xs px-3.5 py-3.5 ",children:e.bigTitle},t):(0,s.jsxs)("div",{className:"mb-1",children:["delete-account"===e.id&&(0,s.jsx)("div",{className:"h-0.25 my-3 bg-n-3 dark:bg-n-6"}),(0,s.jsxs)("button",{className:"group flex items-center w-full px-3.5 py-1.5 rounded-full border-2 border-transparent base2 font-semibold transition-colors hover:bg-n-2 tap-highlight-color dark:hover:bg-n-6 dark:hover:text-n-1 ".concat("delete-account"===e.id?"!text-accent-1 ".concat(l===e&&"!border-accent-1 !bg-n-1 dark:!bg-transparent"):"text-n-4 ".concat(l===e&&"!border-primary-1 text-n-7 !bg-n-1 dark:!bg-transparent dark:text-n-1")),onClick:()=>r(e),children:[(0,s.jsx)(x.Z,{className:"w-4 h-4 mr-3 transition-colors ".concat("delete-account"===e.id?"!fill-accent-1":"fill-n-4 ".concat(l===e&&"fill-n-7 dark:fill-n-1 dark:group-hover:fill-n-1")),name:e.icon}),e.title]})]},t))};var _=l(7938),N=l(4869),w=l(9473),y=l(23330);let k=(0,a.lazy)(()=>Promise.all([l.e(1929),l.e(5020),l.e(7861),l.e(6840)]).then(l.bind(l,16840))),T=(0,a.lazy)(()=>l.e(8124).then(l.bind(l,28124))),E=(0,a.lazy)(()=>l.e(5335).then(l.bind(l,95335))),S=(0,a.lazy)(()=>l.e(2209).then(l.bind(l,2209))),C=(0,a.lazy)(()=>l.e(5535).then(l.bind(l,85535))),I=(0,a.lazy)(()=>l.e(6646).then(l.bind(l,76646))),O=(0,a.lazy)(()=>Promise.all([l.e(2196),l.e(2605),l.e(8497)]).then(l.bind(l,88497))),R=e=>{let{activeItem:t,onItemClick:l,onClose:r}=e,[n,i]=(0,a.useState)(-1),[o,c]=(0,a.useState)(null),[d,u]=(0,a.useState)([]),h=(0,m.useMediaQuery)({query:"(max-width: 767px)"}),{userInfo:{globalOrgId:x}}=(0,w.v9)(e=>e),{language:{browserLanguage:g}}=(0,w.v9)(e=>e),p=[{bigTitle:"USER",id:"USER"},{id:"edit-profile",title:(0,y.VQ)("SETTINGS_PROFILE",g),icon:"profile"},{id:"password",title:(0,y.VQ)("SETTINGS_PASSWORD",g),icon:"lock-1"},{bigTitle:"ORGANIZATION",id:"ORGANIZATION"},{id:"team",title:(0,y.VQ)("SETTINGS_TEAM",g),icon:"user-check"},{id:"members",title:(0,y.VQ)("SETTINGS_TEAM_TITTLE",g),icon:"users-plus"},{id:"usage",title:(0,y.VQ)("SETTINGS_USEAGE",g),icon:"trophy"},{id:"org_settings",title:(0,y.VQ)("SETTINGS_ORGANIZATION_SETTINGS",g),icon:"container"},{id:"SETTING",bigTitle:"SETTING"},{id:"appearance",title:(0,y.VQ)("SETTINGS_APPEARANCE",g),icon:"sun"}],b=async e=>{try{let t=await(0,N.BY)(e);t.success&&i(t.data.role)}catch(e){}};return(0,a.useEffect)(()=>{if(-1!=n&&2==n){let e=p.filter(e=>"usage"!==e.id&&"org_settings"!==e.id);u(e)}else-1!=n&&u(p)},[n,g]),(0,a.useEffect)(()=>{x&&b(x)},[x]),(0,a.useEffect)(()=>{if(d.length>0){if(t){let e=d.find(e=>e.id===t);e&&c(e)}else c(d[1])}},[t,d,x]),(0,s.jsx)("div",{className:"p-12 lg:px-8 md:pt-16 md:px-5 md:pb-8",style:{minHeight:620},children:(0,s.jsxs)("div",{className:"flex md:block",children:[h?(0,s.jsx)(s.Fragment,{children:d.length>0&&(0,s.jsx)(v.Z,{className:"mb-6",classButton:"dark:bg-transparent",classArrow:"dark:fill-n-4",items:d,value:o,onChange:e=>{c(e),l(e.id)}})}):(0,s.jsx)("div",{className:"shrink-0 w-[13.25rem]",children:o&&d.length>0&&(0,s.jsx)(j,{value:o,setValue:e=>{console.log(e,"value"),c(e),l(e.id)},buttons:d})}),(0,s.jsx)(a.Suspense,{fallback:(0,s.jsx)(_.Z,{}),children:(0,s.jsxs)("div",{className:"grow pl-12 md:pl-0",children:[(null==o?void 0:o.id)==="edit-profile"&&(0,s.jsx)(k,{}),(null==o?void 0:o.id)==="password"&&(0,s.jsx)(T,{}),(null==o?void 0:o.id)==="usage"&&(0,s.jsx)(O,{}),(null==o?void 0:o.id)==="org_settings"&&(0,s.jsx)(E,{}),(null==o?void 0:o.id)==="team"&&(0,s.jsx)(S,{onClose:()=>r()}),(null==o?void 0:o.id)==="members"&&(0,s.jsx)(C,{}),(null==o?void 0:o.id)==="appearance"&&(0,s.jsx)(I,{})]})})]})})};var H=l(11119),A=l(98553),M=l(41478),G=l(86892),F=l(51222);let Z=e=>{let{visible:t}=e,[l,r]=(0,a.useState)(null),[n,i]=(0,a.useState)(!1),[o,c]=(0,a.useState)(""),d=(0,w.I0)();(0,g.useRouter)();let{config:{showSetting:m},language:{browserLanguage:u},userInfo:{meData:h}}=(0,w.v9)(e=>e);(0,G.Z)(()=>{let e=localStorage.getItem("token");if(e&&(null==h?void 0:h.organizations)&&h.organizations.length>0){let e=localStorage.getItem("globalOrgId")||h.organizations[0].id;r(e),d((0,F.IM)(e))}});let x=()=>{i(!0)};return(0,a.useEffect)(()=>{m&&(c(m),i(!0))},[m]),(0,s.jsxs)("div",{className:"".concat(t?"mb-6":"mb-3 shadow-[0_1.25rem_1.5rem_0_rgba(0,0,0,0.5)]"),children:[(0,s.jsxs)("div",{className:"".concat(!t&&"p-2.5 bg-n-6 rounded-xl"),children:[(0,s.jsxs)("div",{className:"flex items-center ".concat(t?"justify-center":"px-2.5 py-2.5 pb-4.5"),children:[(0,s.jsxs)("div",{className:"relative w-10 h-10",children:[(0,s.jsx)(b.Z,{className:"rounded-full object-cover",src:(null==h?void 0:h.avatar_url)||A.Z,fill:!0,alt:"Hi",style:{backgroundColor:"#fff"}}),(0,s.jsx)("div",{className:"absolute -right-0.75 -bottom-0.75 w-4.5 h-4.5 bg-primary-2 rounded-full border-4 border-n-6"})]}),!t&&(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)("div",{className:"ml-2 mr-2",children:[(0,s.jsx)("div",{className:"base2 font-semibold text-n-1",children:null==h?void 0:h.fullname}),(0,s.jsx)("div",{className:"caption1 font-semibold text-n-3/50",children:null==h?void 0:h.email})]})})]}),!t&&(0,s.jsx)("div",{className:"btn-stroke-dark w-full mt-2",style:{cursor:"pointer"},onClick:x,children:H.HOME_LEFT_BOTTOM_BUTTON[u]||H.HOME_LEFT_BOTTOM_BUTTON.en})]}),(0,s.jsx)(f.Z,{className:"md:!p-0",classWrap:"max-w-[48rem] md:min-h-screen-ios md:rounded-none",classButtonClose:"hidden md:block md:absolute md:top-5 md:right-5 dark:fill-n-4",classOverlay:"md:bg-n-1",visible:n,onClose:()=>{i(!1),d((0,M.rI)(""))},children:n&&(0,s.jsx)(R,{activeItem:o,onItemClick:e=>d((0,M.rI)(e)),onClose:()=>{i(!1),d((0,M.rI)(""))}})})]})};var L=l(12498),P=l(4205);let B=e=>{let{visible:t}=e,{colorMode:l,setColorMode:r}=(0,L.If)(),n=e=>{c((0,P.Eq)(!1)),r(e),window.localStorage.setItem("chakra-ui-color-mode-ai",e)},{followTheTopic:o}=(0,w.v9)(e=>e.theme),c=(0,w.I0)();return(0,a.useEffect)(()=>{let e=window.matchMedia("(prefers-color-scheme: dark)"),t=window.localStorage.getItem("chakra-ui-color-mode-ai"),l=()=>{o&&r(e.matches?"dark":"light")};return void 0===e.matches?r("light"):t&&!o&&r(t),e.addEventListener("change",l),()=>{e.removeEventListener("change",l)}},[o,r]),(0,s.jsx)("div",{className:"".concat(!t&&"relative flex w-full p-1 bg-n-6 rounded-xl before:absolute before:left-1 before:top-1 before:bottom-1 before:w-[calc(50%-0.25rem)] before:bg-n-7 before:rounded-[0.625rem] before:transition-all ".concat("dark"===l&&"before:translate-x-full")),children:[{title:"Light",icon:"sun",active:"light"===l,onClick:()=>n("light")},{title:"Dark",icon:"moon",active:"dark"===l,onClick:()=>n("dark")}].map((e,l)=>(0,s.jsxs)("button",{className:(0,i.m)("relative z-1 group flex justify-center items-center ".concat(t?"flex w-full h-16 rounded-xl bg-n-6 md:w-8 md:h-8 md:mx-auto ".concat(e.active&&"hidden"):"h-10 basis-1/2 base2 font-semibold text-n-4 transition-colors hover:text-n-1 ".concat(e.active&&"text-n-1"))),onClick:e.onClick,children:[(0,s.jsx)(x.Z,{className:"fill-n-4 transition-colors group-hover:fill-n-1 ".concat(!t&&"mr-3"," ").concat(e.active&&!t&&"fill-n-1"),name:e.icon}),!t&&e.title]},l))})};var z=l(68295);let D=e=>{let{value:t,setValue:l,smallSidebar:a,visibleRightSidebar:r,me:n}=e;(0,y.hu)(n,"me information left");let c=()=>{l(!t),a&&t?(0,o.disablePageScroll)():(0,o.enablePageScroll)(),console.log("用户请求缩小左边内容"),localStorage.setItem("LEFT_HIDE_STATUS","".concat(!t))};return(0,s.jsxs)("div",{className:(0,i.m)("fixed z-20 top-0 left-0 bottom-0 flex flex-col pt-30 px-4 bg-n-7 md:invisible md:opacity-0 md:transition-opacity ".concat(t?"w-24 pb-38 md:w-16 md:px-0 md:pb-30":"w-80 pb-58"," ").concat(r?"md:visible md:opacity-100":"")),children:[(0,s.jsxs)("div",{className:"absolute top-0 right-0 left-0 flex items-center h-30 pl-7 pr-6 ".concat(t?"justify-center md:px-4":"justify-between"),children:[!t&&(0,s.jsx)(h.Z,{}),(0,s.jsx)("button",{className:"group tap-highlight-color",onClick:c,children:(0,s.jsx)(x.Z,{className:"fill-n-4 transition-colors group-hover:fill-n-3",name:t?"toggle-on":"toggle-off"})})]}),(0,s.jsxs)("div",{className:"grow overflow-y-auto scroll-smooth scrollbar-none overflow-x-hidden",children:[(0,s.jsx)(p,{visible:t,items:[{title:"Chat",icon:"chat",color:"fill-accent-2",url:"/home"},{title:"Search",icon:"search",color:"fill-primary-2",url:"/search"},{title:"Image",icon:"barcode",color:"fill-accent-1",url:"/image"}]}),(0,s.jsx)("div",{className:"my-4 h-0.25 bg-n-6 ".concat(t?"-mx-4 md:mx-0":"-mx-2 md:mx-0")}),(0,s.jsx)(p,{visible:t,items:[{title:"Updates & FAQ",icon:"recording",color:"fill-accent-3",url:"/updates-and-faq"}]})]}),(0,s.jsxs)("div",{className:"absolute left-0 bottom-0 right-0 pb-6 px-4 bg-n-7 before:absolute before:left-0 before:right-0 before:bottom-full before:h-10 before:bg-gradient-to-t before:from-[#131617] before:to-[rgba(19,22,23,0)] before:pointer-events-none md:px-3",children:[(0,s.jsx)(Z,{visible:t}),(0,s.jsx)(z.dF,{children:(0,s.jsx)(B,{visible:t})})]})]})};var U=l(86501),W=l(98354),V=l(43709),Y=l(72510),Q=l(11355),q=l(57113);let J=e=>{let{me:t,handleNewChatClick:l}=e;(0,y.hu)(t,"me Right Profile不存在");let[r,n]=(0,a.useState)(!1),[i,o]=(0,a.useState)(""),[c,d]=(0,a.useState)(null),{language:{browserLanguage:m},userInfo:{meData:u}}=(0,w.v9)(e=>e),{userInfo:{globalOrgId:h}}=(0,w.v9)(e=>e),g=(0,w.I0)(),p=async e=>{f(e),v(e)};(0,a.useEffect)(()=>{h&&p(h)},[h]);let f=async e=>{try{if((null==u?void 0:u.organizations.length)>0){let t=null==u?void 0:u.organizations.find(t=>t.id===e);o(null==t?void 0:t.name)}}catch(e){console.log(e,"error")}},v=async e=>{try{let t=await(0,N.kH)(e);t.success&&d(t.data),setTimeout(()=>{n(!1)},900)}catch(e){setTimeout(()=>{n(!1)},900)}},j=e=>{n(!0),v(e)},_=()=>{localStorage.removeItem("token"),localStorage.removeItem("globalOrgId"),window.location.href="/"},k=[{title:H.HOME_LEFT_BOTTOM_SWITCH_ORGANIZATION[m]||H.HOME_LEFT_BOTTOM_SWITCH_ORGANIZATION.en,icon:"users-plus",onClick:()=>g((0,M.rI)("team")),id:"team"},{title:H.HOME_LEFT_BOTTOM_LOGOUT[m]||H.HOME_LEFT_BOTTOM_LOGOUT.en,icon:"logout",onClick:()=>_(),id:"logout"}];return(0,s.jsx)(s.Fragment,{children:(0,s.jsx)("div",{className:"relative z-10 mr-3 lg:mr-6 md:static",children:(0,s.jsxs)(Y.v,{children:[(0,s.jsxs)(Y.v.Button,{className:"group relative w-10 h-10 rounded-full transition-shadow ui-open:shadow-[0_0_0_0.25rem_#0084FF]",onClick:()=>{f(h)},children:[(0,s.jsx)(b.Z,{className:"rounded-full object-cover",src:(null==u?void 0:u.avatar_url)||A.Z,fill:!0,alt:"Hi",style:{backgroundColor:"#fff"},id:"sw"}),(0,s.jsx)("div",{className:"absolute -right-0.75 -bottom-0.75 w-4.5 h-4.5 bg-primary-2 rounded-full border-4 border-n-1 dark:border-n-6"})]}),(0,s.jsx)(Q.u,{enter:"transition duration-100 ease-out",enterFrom:"transform scale-95 opacity-0",enterTo:"transform scale-100 opacity-100",leave:"transition duration-75 ease-out",leaveFrom:"transform scale-100 opacity-100",leaveTo:"transform scale-95 opacity-0",children:(0,s.jsxs)(Y.v.Items,{className:"absolute top-full -right-5 w-[19.88rem] mt-[0.9375rem] p-4 bg-n-1 border border-n-2 rounded-2xl shadow-[0px_48px_64px_-16px_rgba(0,0,0,0.25)] md:-right-38 md:w-[calc(100vw-4rem)] dark:bg-n-7 dark:border-n-5",children:[(0,s.jsx)("div",{className:"flex items-center mb-3 justify-between w-full overflow-hidden",children:(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsxs)("div",{className:"relative w-15 h-15",children:[(0,s.jsx)(b.Z,{className:"rounded-full object-cover",src:(null==u?void 0:u.avatar_url)||A.Z,fill:!0,alt:"Hi",style:{backgroundColor:"#fff"}}),(0,s.jsx)("div",{className:"absolute right-0 bottom-0 w-4.5 h-4.5 bg-primary-2 rounded-full border-4 border-n-1 dark:border-n-7"})]}),(0,s.jsxs)("div",{className:"pl-4",children:[(0,s.jsxs)("div",{className:"h6 text-sm flex items-center",children:[H.HOME_RIGHT_TOP_CURRENT_ORGANIZATION[m]||H.HOME_RIGHT_TOP_CURRENT_ORGANIZATION.en,(0,s.jsx)(q.Z,{content:H.HOME_RIGHT_TOP_CURRENT_ORGANIZATION_NOTE[m]||H.HOME_RIGHT_TOP_CURRENT_ORGANIZATION_NOTE.en})]}),(0,s.jsxs)("div",{className:"caption1 text-n-4 ",children:[H.HOME_RIGHT_TOP_ORG[m]||H.HOME_RIGHT_TOP_ORG.en," ",i]}),(0,s.jsxs)("div",{className:"caption1 text-n-4 flex flex-col",children:[(0,s.jsxs)("div",{className:"flex items-start",children:[H.HOME_RIGHT_TOP_BALANCE[m]||H.HOME_RIGHT_TOP_BALANCE.en," ",null==c?void 0:c.balance,"$",(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",className:"w-[1rem] text-n-9 h-[1rem] ml-2 cursor-pointer ".concat(r?"animate-spin":""),onClick:()=>{j(h)},children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0l3.181 3.183a8.25 8.25 0 0013.803-3.7M4.031 9.865a8.25 8.25 0 0113.803-3.7l3.181 3.182m0-4.991v4.99"})})]}),(0,s.jsxs)("div",{children:[H.HOME_RIGHT_TOP_TRIAL_BALANCE[m]||H.HOME_RIGHT_TOP_TRIAL_BALANCE.en," ",null==c?void 0:c.trial_balance,"$"]})]})]})]})}),(0,s.jsx)("div",{className:"px-4 bg-n-2 rounded-xl dark:bg-n-6",children:k.map((e,t)=>(0,s.jsx)(Y.v.Item,{children:(0,s.jsx)("div",{children:(0,s.jsxs)("button",{className:"group flex items-center w-full h-12 base2 font-semibold transition-colors hover:text-primary-1",onClick:e.onClick,id:e.id,children:[(0,s.jsx)(x.Z,{className:"mr-4 fill-n-4 transition-colors group-hover:fill-primary-1",name:e.icon}),e.title]})})},t))})]})})]})})})};var K=l(62161);let X=e=>{let{item:t,index:l,onClick:r,onDeleteClick:n,mode:i}=e,{setActiveChat:o,activeChat:c}=(0,a.useContext)(z.py),{chatHistory:d,setChatHistory:m}=(0,a.useContext)(z.py),{currentChat:u}=(0,a.useContext)(z.py),[h,g]=(0,a.useState)(!1),[p,b]=(0,a.useState)(!1),[f,v]=(0,a.useState)(!1),[j,_]=(0,a.useState)(!1),[y,k]=(0,a.useState)(!1),[T,E]=(0,a.useState)(!1),[S,C]=(0,a.useState)(t.title),[I,O]=(0,a.useState)(0),[R,H]=(0,a.useState)(!1),{chat:{imagesAboutInfo:A}}=(0,w.v9)(e=>e),M=(0,w.I0)(),G=(0,a.useRef)(null),F=()=>{_(!0),E(!0)},Z=()=>{_(!1),E(!1)},L=e=>{e.stopPropagation(),H(!0)},P=e=>{C(e.target.value)},B=async e=>{try{e&&e.stopPropagation();let t=G.current.value;try{let e=await("search"===i?(0,N.il)(c,t):"chat"===i?(0,N.l2)(c,t):(0,N.ek)(c,t));e.success&&(C(t),H(!1),O(1),d[l].title=t,m([...d]),"images"===i&&M((0,K.N_)({...A,title:t})))}catch(e){}}catch(e){console.error(e,"error")}},D=async e=>{if(e.stopPropagation(),t.isNewTopic){let e=d.filter(e=>e.id!==t.id);return console.log(e,"updatedChatHistory"),n&&n(e.length),m(e),!1}try{let e=await("search"===i?(0,N.QQ)(t.id):"chat"===i?(0,N.OB)(t.id):(0,N.L5)(t.id));if(e.success){let e=d.filter(e=>e.id!==t.id);console.log(e,"updatedChatHistory"),m(e),n&&n(e.length)}}catch(e){}};(0,a.useEffect)(()=>{g(e=>!e)},[u]);let U=e=>{e.stopPropagation(),H(!1)};(0,a.useEffect)(()=>{g(e=>!e)},[t]),(0,a.useEffect)(()=>{v(c===t.id),c===t.id?O(1):H(!1),t.title&&C(t.title)},[c,t.id,t.title]),(0,a.useEffect)(()=>{g(e=>!e)},[u]);let W=()=>{c!==t.id&&(O(1),(y||T)&&(E(!1),k(!1)),o(t.id),v(!0),r&&r(t))};return(0,s.jsx)("div",{className:"relative mt-2",onMouseEnter:F,onMouseLeave:Z,children:(0,s.jsx)("div",{onClick:W,children:(0,s.jsx)("div",{className:"group py-3 pl-4 pr-3 rounded-xl transition-colors ".concat(f?"bg-n-3/75 dark:bg-n-5":"hover:bg-n-3/75 dark:hover:bg-n-5"),children:(0,s.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,s.jsx)(x.Z,{className:"w-4 h-4 mr-2 fill-n-4 transition-colors group-hover:text-primary-1",name:"chat"}),R?(0,s.jsx)("input",{type:"text",ref:G,value:S||"",onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),B())},onChange:P,autoFocus:!0,style:{background:"none"}}):(0,s.jsx)("div",{style:{flex:3,textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap",fontWeight:"bold"},children:p?"Generating title...":t.title||("images"===i?"New Images":"New Chat")}),f&&(0,s.jsxs)("div",{style:{flex:1,display:"flex",justifyContent:"space-around"},children:[1===I&&!R&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("button",{onClick:L,children:(0,s.jsx)(x.Z,{className:"w-4 h-4 fill-n-4 transition-colors group-hover:text-primary-1",name:"edit"})}),(0,s.jsx)("button",{onClick:D,children:(0,s.jsx)(x.Z,{className:"w-4 h-4 fill-n-4 transition-colors group-hover:text-primary-1",name:"trash"})})]}),R&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("button",{onClick:e=>B(e),children:(0,s.jsx)(x.Z,{className:"w-4 h-4 fill-n-4 transition-colors group-hover:text-primary-1",name:"check"})}),(0,s.jsx)("button",{onClick:U,children:(0,s.jsx)(x.Z,{className:"w-4 h-4 fill-n-4 transition-colors group-hover:text-primary-1",name:"close"})})]})]})]})})})})},$=e=>{let{}=e;return(0,s.jsx)(s.Fragment,{children:Array.from([,,,,,].keys()).map(e=>(0,s.jsx)("div",{className:"mb-2 last:mb-0",children:(0,s.jsxs)("div",{className:"flex p-3",children:[(0,s.jsx)("div",{className:"w-5.5 h-5.5 mt-0.25 ml-0.25 mr-3 bg-n-3 rounded-md dark:bg-n-5"}),(0,s.jsxs)("div",{className:"grow",children:[(0,s.jsx)("div",{className:"w-40 h-3 mt-1.5 rounded-sm bg-n-3 dark:bg-n-5"}),(0,s.jsx)("div",{className:"h-3 mt-3.5 rounded-sm bg-n-3 dark:bg-n-5"}),(0,s.jsxs)("div",{className:"flex justify-between items-center mt-3",children:[(0,s.jsx)("div",{className:"w-7 h-7 rounded-full bg-n-3 dark:bg-n-5"}),(0,s.jsx)("div",{className:"w-12 h-2 rounded-sm bg-n-3 dark:bg-n-5"})]})]})]})},e))})},ee=e=>{let{}=e;return(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center h-[20rem]",children:[(0,s.jsx)("div",{className:"w-40 h-40",children:(0,s.jsxs)("svg",{viewBox:"0 0 160 160",children:[(0,s.jsxs)("defs",{children:[(0,s.jsxs)("linearGradient",{x1:"50%",x2:"50%",y2:"100%",id:"van-empty-1-5",children:[(0,s.jsx)("stop",{stopColor:"#F2F3F5",offset:"0%"}),(0,s.jsx)("stop",{stopColor:"#DCDEE0",offset:"100%"})]}),(0,s.jsxs)("linearGradient",{x1:"95%",y1:"48%",x2:"5.5%",y2:"51%",id:"van-empty-1-6",children:[(0,s.jsx)("stop",{stopColor:"#EAEDF1",offset:"0%"}),(0,s.jsx)("stop",{stopColor:"#DCDEE0",offset:"100%"})]}),(0,s.jsxs)("linearGradient",{y1:"45%",x2:"100%",y2:"54%",id:"van-empty-1-7",children:[(0,s.jsx)("stop",{stopColor:"#EAEDF1",offset:"0%"}),(0,s.jsx)("stop",{stopColor:"#DCDEE0",offset:"100%"})]})]}),(0,s.jsx)("defs",{children:(0,s.jsxs)("linearGradient",{id:"van-empty-1-a",x1:"64%",y1:"100%",x2:"64%",children:[(0,s.jsx)("stop",{stopColor:"#FFF",offset:"0%",stopOpacity:"0.5"}),(0,s.jsx)("stop",{stopColor:"#F2F3F5",offset:"100%"})]})}),(0,s.jsxs)("g",{opacity:".8",children:[(0,s.jsx)("path",{d:"M36 131V53H16v20H2v58h34z",fill:"url(#van-empty-1-a)"}),(0,s.jsx)("path",{d:"M123 15h22v14h9v77h-31V15z",fill:"url(#van-empty-1-a)"})]}),(0,s.jsx)("defs",{children:(0,s.jsxs)("linearGradient",{id:"van-empty-1-b",x1:"64%",y1:"97%",x2:"64%",y2:"0%",children:[(0,s.jsx)("stop",{stopColor:"#F2F3F5",offset:"0%",stopOpacity:"0.3"}),(0,s.jsx)("stop",{stopColor:"#F2F3F5",offset:"100%"})]})}),(0,s.jsxs)("g",{opacity:".8",children:[(0,s.jsx)("path",{d:"M87 6c3 0 7 3 8 6a8 8 0 1 1-1 16H80a7 7 0 0 1-8-6c0-4 3-7 6-7 0-5 4-9 9-9Z",fill:"url(#van-empty-1-b)"}),(0,s.jsx)("path",{d:"M19 23c2 0 3 1 4 3 2 0 4 2 4 4a4 4 0 0 1-4 3v1h-7v-1l-1 1c-2 0-3-2-3-4 0-1 1-3 3-3 0-2 2-4 4-4Z",fill:"url(#van-empty-1-b)"})]}),(0,s.jsxs)("g",{transform:"translate(36 50)",fill:"none",children:[(0,s.jsxs)("g",{transform:"translate(8)",children:[(0,s.jsx)("rect",{fill:"#EBEDF0",opacity:".6",x:"38",y:"13",width:"36",height:"53",rx:"2"}),(0,s.jsx)("rect",{fill:"url(#van-empty-1-5)",width:"64",height:"66",rx:"2"}),(0,s.jsx)("rect",{fill:"#FFF",x:"6",y:"6",width:"52",height:"55",rx:"1"}),(0,s.jsxs)("g",{transform:"translate(15 17)",fill:"url(#van-empty-1-6)",children:[(0,s.jsx)("rect",{width:"34",height:"6",rx:"1"}),(0,s.jsx)("path",{d:"M0 14h34v6H0z"}),(0,s.jsx)("rect",{y:"28",width:"34",height:"6",rx:"1"})]})]}),(0,s.jsx)("rect",{fill:"url(#van-empty-1-7)",y:"61",width:"88",height:"28",rx:"1"}),(0,s.jsx)("rect",{fill:"#F7F8FA",x:"29",y:"72",width:"30",height:"6",rx:"1"})]})]})}),(0,s.jsx)("p",{className:"text-gray-600",children:"no data"})]})})},et=e=>{let{visible:t,setActiveIndex:l,activeIndex:a}=e,{language:{browserLanguage:r}}=(0,w.v9)(e=>e),n=[{title:H.HOME_RIGHT_HISTORY_BUTTON[r]||H.HOME_RIGHT_HISTORY_BUTTON.en,active:0===a,onClick:()=>l(0)},{title:H.HOME_RIGHT_SETTINGS_BUTTON[r]||H.HOME_RIGHT_SETTINGS_BUTTON.en,active:1===a,onClick:()=>l(1)}];return(0,s.jsx)("div",{className:"".concat(!t&&"relative flex w-full p-1 bg-n-6 rounded-xl before:absolute before:left-1 before:top-1 before:bottom-1 before:w-[calc(50%-0.25rem)] before:bg-n-9 before:rounded-[0.625rem] before:transition-all ".concat(1===a&&"before:translate-x-full")),children:n.map((e,l)=>(0,s.jsx)("button",{className:(0,i.m)("relative z-1 group flex justify-center items-center ".concat(t?"flex w-full h-16 rounded-xl bg-n-4 md:w-8 md:h-8 md:mx-auto ".concat(e.active&&"hidden"):"h-10 basis-1/2 base2 font-semibold text-n-4 transition-colors hover:text-n-1 ".concat(e.active&&"text-n-1"))),onClick:e.onClick,children:!t&&e.title},l))})};var el=l(59335),es=l(19205),ea=l.n(es),er=l(45810),en=l(67556),ei=l(635);let eo=()=>{console.log("changeToast"),(0,U.ZP)(e=>(0,s.jsx)(V.Z,{iconCheck:!0,children:(0,s.jsx)("div",{className:"ml-3 h6",children:"Auto Save "})}))},ec=e=>{let{mode:t}=e,l=(0,w.I0)(),{model:{modelData:a,chatModelParams:r},imagesModel:{imagesModelData:n,imagesChatModelParams:i},chat:{chatStatus:o,imagesStatus:c,chatAboutInfo:d,imagesAboutInfo:m}}=(0,w.v9)(e=>e),u="chat"===t&&"new_chat"==o||"images"===t&&"new_chat"==c,h=(e,s,a)=>{switch(t){case"chat":l((0,en.hR)({index:e,key:s,value:a}));break;case"images":l((0,ei.uU)({index:e,key:s,value:a}))}},x=(e,t,l)=>{h(e,t,l)},g=(e,t)=>{let{index:l,key:s}=t,a=e.target.value;h(l,s,a)},p=(e,t,l,s)=>{"integer"===s&&console.log(l=parseInt(l),"value1122"),h(e,t,l)},b=(e,t,l)=>{h(e,t,l)},f=(e,t)=>{let{index:l,key:s,type:a}=t,r=e.target.value;"integer"===a&&console.log(r=parseInt(r),"value1122"),h(l,s,r)},j=[];if("images"===t){let e=i.find(e=>e.cat_id===n.cat_id&&e.model_id===n.model_id),t=(null==m?void 0:m.id)?m.params_def:(null==e?void 0:e.paramsAction)||[];j=t}else if("chat"===t){let e=r.find(e=>e.cat_id===a.cat_id&&e.model_id===a.model_id);console.log(e,"paramsList");let t=(null==d?void 0:d.conversations.length)>0?d.topic.params_def:(null==e?void 0:e.paramsAction)||[];j=t}return(0,s.jsxs)("div",{className:"".concat(ea().settingsContainer," relative"),style:{height:"100%"},children:[(0,s.jsx)("div",{className:"grow overflow-y-auto scroll-smooth w-full  flex-1",children:j.length>0&&j.map((e,t)=>{switch(e.type){case"bool":return(0,s.jsxs)("div",{className:ea().settingsItem,style:{marginTop:0},children:[(0,s.jsx)("div",{className:ea().label,children:e.label}),(0,s.jsx)(er.Z,{disabled:!u,checked:e.default,onChange:e=>{u&&x(t,"default",e)},offColor:"#808080",onColor:"#0000ff",height:20,width:48,handleDiameter:30,uncheckedIcon:!1,checkedIcon:!1,boxShadow:"0px 1px 5px rgba(0, 0, 0, 0.6)"})]},t);case"string":return(0,s.jsxs)("div",{className:ea().settingsItem,children:[(0,s.jsx)("div",{className:ea().label,children:e.label}),(0,s.jsx)(el.Textarea,{value:e.default,onChange:e=>{u&&g(e,{index:t,key:"default"})},className:"".concat(ea().input," outline-none"),disabled:!u,onBlur:()=>eo(),rows:5})]},t);case"number":case"integer":return(0,s.jsxs)("div",{className:ea().settingsItem,children:[(0,s.jsxs)("div",{className:ea().sliderLabel,children:[(0,s.jsx)("div",{className:ea().label,children:e.label}),(0,s.jsx)("div",{className:ea().box,children:(0,s.jsx)(el.Input,{type:"number",value:e.default,onChange:l=>{if(!u)return;let s=l.target.value;console.log("===================================="),console.log(s,"eValue"),console.log("===================================="),s.length>1&&"0"==s.slice(0,1)&&-1==s.indexOf(".")&&(s=s.slice(1),console.log("slice")),+s<+e.min?(p(t,"default",s,e.type),console.log(1)):+s<=+e.min?(p(t,"default",e.min,e.type),console.log(e.min,11)):+s>=+e.max?(p(t,"default",e.max,e.type),console.log(111)):1==s.length&&"0"!=s||s.indexOf(".")>-1?(p(t,"default",s,e.type),console.log(1111)):2==s.length&&"0"!=s?(p(t,"default",s,e.type),console.log(11111)):s||(p(t,"default","0",e.type),console.log(111111))},onBlur:()=>{if(""==e.default&&0!=e.default)try{eo(),p(t,"default","1",e.type)}catch(e){console.log(e,"errorerror")}else+e.default>=+e.min&&+e.default<=+e.max&&eo()},min:e.min,max:e.max,step:"number"===e.type?.01:1,className:"".concat(ea().inputs," ").concat(ea().hideArrows," ").concat(ea().fixedSize," outline-none"),disabled:!u})})]}),(0,s.jsx)(el.Slider,{value:String(e.default),onChange:l=>{u&&f(l,{index:t,key:"default",type:e.type})},min:e.min,max:e.max,step:"number"===e.type?.01:1,color:"blue",style:{height:"5px",width:"100%",opacity:u?1:.5},onBlur:()=>{eo()}})]},t);case"select":let l=e.options;if(Array.isArray(l)){let a=[];l.map(e=>{a.push({name:e[0],id:e[1]})});let r=(0,y.dc)(a);return(0,s.jsxs)("div",{className:ea().settingsItem,children:[(0,s.jsx)("div",{className:ea().sliderLabel,children:(0,s.jsx)("div",{className:ea().label,children:e.label})}),(0,s.jsx)(v.Z,{className:"w-full mt-2",classButton:"bg-n-3/75 dark:bg-n-5/75 dark:shadow-[inset_0_0_0_0.0625rem_#232627]",items:a,value:r[e.default],onChange:e=>{u&&(b(t,"default",e.id),eo())}})]},t)}default:return null}})}),u&&(0,s.jsx)(s.Fragment,{children:(0,s.jsx)("div",{className:"px-6 pt-3 bg-white dark:bg-n-6 flex flex-col w-full",children:(0,s.jsx)("div",{className:"flex justify-between",children:(0,s.jsx)("button",{className:"btn-blue w-full",onClick:()=>{l("chat"===t?(0,en.sg)():(0,ei.rt)()),eo()},children:(0,s.jsx)("span",{children:"Reset"})})})})}),!u&&(0,s.jsx)("div",{className:"dark:bg-n-6/80 bg-white/80 absolute top-0 right-0 bottom-0 left-0 w-full h-full flex items-center justify-center",title:"Can only be changed for new topics.",children:(0,s.jsx)("span",{className:"dark:bg-n-6/80 bg-white text-sm px-5 py-5",children:"Can only be changed for new topics."})})]})};var ed=l(75131),em=l(25675),eu=l.n(em);let eh=e=>{let{items:t,value:l,setValue:a}=e;return(0,s.jsx)(ed.E,{className:"flex  flex-1 sm:flex-wrap ",value:l,onChange:a,name:"plan",children:t.map(e=>(0,s.jsxs)(ed.E.Option,{value:e,className:"pt-2.5 pb-2.5  bg-n-2 border-2 border-n-2 rounded-xl transition-colors ui-checked:border-primary-1  cursor-pointer tap-highlight-color  dark:ui-checked:border-primary-1 relative mb-3 mr-6 ",children:[(0,s.jsx)("div",{className:"w-[8rem] md:w-[5rem] sm:w-[4.5rem] flex items-center",children:e.icon&&(0,s.jsx)(eu(),{src:e.icon,alt:"stripe",width:128,height:64.005})}),(0,s.jsx)("div",{className:"absolute right-1 bottom-1",children:(0,s.jsx)(x.Z,{className:"ml-auto fill-primary-1 opacity-0 transition-opacity ui-checked:opacity-100",name:"check-thin"})})]},e.id))})},ex=e=>{let{onClick:t,amount:l,disabled:a}=e;return(0,s.jsx)("div",{className:"",children:(0,s.jsxs)("div",{className:"text-right",children:[(0,s.jsxs)("div",{className:"h4 mb-4",children:["Total: ",l," USD"]}),(0,s.jsx)("button",{className:"btn-blue md:w-full",type:"button",disabled:a,onClick:t,children:"Pay"})]})})};var eg=l(88107),ep=l.n(eg);let eb=()=>{let[e,t]=(0,a.useState)([]),[l,r]=(0,a.useState)("0"),{language:{browserLanguage:n}}=(0,w.v9)(e=>e);return(0,G.Z)(async()=>{try{let e=await(0,N.aN)();e.success?((0,y.hu)(Array.isArray(e.data),"充值列表数据格式不正确"),t(e.data),r(e.data.length>0?"1":"2")):r("2")}catch(e){r("2")}}),(0,s.jsxs)("div",{className:"h-[500px]",children:["1"==l&&(0,s.jsx)("div",{className:"max-h-[533px] overflow-y-auto ",children:(0,s.jsx)("div",{className:" sm:px-6 lg:px-8 ",children:(0,s.jsx)("div",{className:"flow-root",children:(0,s.jsx)("div",{className:"-my-2 sm:-mx-6 lg:-mx-8",children:(0,s.jsx)("div",{className:"inline-block min-w-full py-2 align-middle",children:(0,s.jsxs)("table",{className:"min-w-full border-separate border-spacing-0",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{scope:"col",className:"sticky top-0 z-10 border-b border-gray-300 bg-white bg-opacity-75 py-3.5 pl-4 pr-3 text-left text-sm font-semibold text-gray-900 backdrop-blur backdrop-filter sm:pl-6 lg:pl-8",children:H.RECHARGE_HISTORY_TABLE_CREATE_TIME[n]||H.RECHARGE_HISTORY_TABLE_CREATE_TIME.en}),(0,s.jsx)("th",{scope:"col",className:"sticky top-0 z-10  border-b border-gray-300 bg-white bg-opacity-75 px-3 py-3.5 text-left text-sm font-semibold text-gray-900 backdrop-blur backdrop-filter sm:table-cell",children:H.RECHARGE_PAYMENT_METHOD[n]||H.RECHARGE_PAYMENT_METHOD.en}),(0,s.jsx)("th",{scope:"col",className:"sticky top-0 z-10  border-b border-gray-300 bg-white bg-opacity-75 px-3 py-3.5 text-left text-sm font-semibold text-gray-900 backdrop-blur backdrop-filter sm:table-cell",children:"ORGANIZATION_ID"}),(0,s.jsx)("th",{scope:"col",className:"sticky top-0 z-10  border-b border-gray-300 bg-white bg-opacity-75 px-3 py-3.5 text-left text-sm font-semibold text-gray-900 backdrop-blur backdrop-filter lg:table-cell",children:H.RECHARGE_HISTORY_TABLE_AMOUNT[n]||H.RECHARGE_HISTORY_TABLE_AMOUNT.en}),(0,s.jsx)("th",{scope:"col",className:"sticky top-0 z-10 border-b border-gray-300 bg-white bg-opacity-75 py-3.5 pl-3 pr-4 backdrop-blur backdrop-filter sm:pr-6 lg:pr-8",children:(0,s.jsx)("span",{className:"sr-only",children:"Edit"})})]})}),(0,s.jsx)("tbody",{children:e.map((t,l)=>(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{className:(0,i.m)(l!==e.length-1?"border-b border-gray-200":"","whitespace-nowrap py-4 pl-4 pr-3 text-sm font-medium text-gray-900 sm:pl-6 lg:pl-8 dark:text-white"),children:(0,y.ZZ)(t.create_time)}),(0,s.jsx)("td",{className:(0,i.m)(l!==e.length-1?"border-b border-gray-200":"","whitespace-nowrap  px-3 py-4 text-sm text-gray-500 dark:text-white sm:table-cell"),children:t.payment_method_name}),(0,s.jsx)("td",{className:(0,i.m)(l!==e.length-1?"border-b border-gray-200":"","whitespace-nowrap  px-3 py-4 text-sm text-gray-500 dark:text-white sm:table-cell"),children:t.organization_id}),(0,s.jsx)("td",{className:(0,i.m)(l!==e.length-1?"border-b border-gray-200":"","whitespace-nowrap  px-3 py-4 text-sm text-gray-500 dark:text-white lg:table-cell"),children:t.amount}),(0,s.jsx)("td",{className:(0,i.m)(l!==e.length-1?"border-b border-gray-200":"","relative whitespace-nowrap py-4 pr-4 pl-3 text-right text-sm font-medium sm:pr-8 lg:pr-8"),children:(0,s.jsx)("a",{href:t.payment_link,className:"text-n-9 hover:text-n-9/75",children:"waiting"==t.status?"Pay":"View"})})]},t.id))})]})})})})})}),"2"==l&&(0,s.jsx)(ee,{})]})},ef=()=>{var e;let[t,l]=(0,a.useState)([]),[r,n]=(0,a.useState)(),[o,c]=(0,a.useState)(10),[d,m]=(0,a.useState)(!1),{language:{browserLanguage:u},userInfo:{meData:{organizations:x}}}=(0,w.v9)(e=>e),[g,p]=(0,a.useState)(null),[b,f]=(0,a.useState)(0),{colorMode:j}=(0,L.If)(),{userInfo:{globalOrgId:y}}=(0,w.v9)(e=>e);(0,a.useEffect)(()=>{if(x.length>0){let e=x.filter(e=>e.id==y);p(e.length>0?e[0]:null)}},[y,x]),(0,G.Z)(async()=>{try{let e=await(0,N.FL)();console.log(e,"resresresresres"),e.success&&(l(e.data),n(e.data[0]))}catch(e){}});let k=async()=>{try{m(!0);let e=await(0,N.NQ)({amount:String(o),provider:r.id},g.id||y);e.success&&(window.location.href=e.data.url),m(!1)}catch(e){m(!1)}},T=[{name:H.RECHARGE_NAME[u]||H.RECHARGE_NAME.en},{name:H.RECHARGE_HISTORY_TABLE_TITLE[u]||H.RECHARGE_HISTORY_TABLE_TITLE.en}];return(0,s.jsxs)("div",{className:"p-12 pt-4 lg:px-8 md:pt-16 md:px-5 md:pb-8",children:[(0,s.jsx)("div",{className:"mx-auto",children:(0,s.jsx)("div",{className:"flex h-16 justify-between",children:(0,s.jsxs)("div",{className:"flex",children:[(0,s.jsx)("div",{className:"flex flex-shrink-0 items-center mr-8",children:(0,s.jsx)(h.Z,{dark:"light"===j,className:"max-w-[6rem] mx-auto "})}),(0,s.jsx)("div",{className:"flex sm:-my-px sm:ml-6 sm:flex sm:space-x-8",children:T.map((e,t)=>(0,s.jsx)("span",{className:(0,i.m)(t===b?"border-n-9 text-n-9":"border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-700","inline-flex items-center border-b-2 px-1 pt-1 text-sm font-medium mr-4 cursor-pointer"),onClick:()=>f(t),children:e.name},e.name))})]})})}),(0,s.jsx)("div",{className:"h-0.25 dark:border-n-5 -mx-4 md:mx-0  border-b border-gray-900/5  dark:border-transparent dark:bg-n-5/50"}),0===b&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"mt-6 mb-6 flex lg:flex-wrap",children:(0,s.jsxs)("div",{className:"flex items-center lg:w-full",children:[(0,s.jsx)("div",{className:"flex mr-4 base2",children:(0,s.jsxs)("div",{className:"mr-auto dark:text-n-4 w-[6rem] text-right",children:[(0,s.jsx)("span",{className:"text-red-500 mr-1",children:"*"}),null==(e=H.HOME_RIGHT_TOP_ORG[u]||H.HOME_RIGHT_TOP_ORG.en)?void 0:e.replace("：","")," "]})}),(0,s.jsx)("div",{className:" dark:border-n-5  lg:w-[19rem]",children:(0,s.jsx)(v.Z,{label:"",className:"shrink-0 min-w-[14.5rem]",items:x,value:g,onChange:p})})]})}),(0,s.jsx)("div",{className:"flex lg:flex-wrap",children:(0,s.jsxs)("div",{className:"flex items-center lg:w-full",children:[(0,s.jsx)("div",{className:"flex mr-4 base2",children:(0,s.jsxs)("div",{className:"mr-auto dark:text-n-4 w-[6rem] text-right",children:[(0,s.jsx)("span",{className:"text-red-500 mr-1",children:"*"}),H.RECHARGE_AMOUNT_TITLE[u]||H.RECHARGE_AMOUNT_TITLE.en,":"]})}),(0,s.jsx)("div",{className:"border border-n-3 rounded-xl dark:border-n-5 lg:w-[19rem]",children:(0,s.jsxs)("div",{className:"p-3 lg:w-full flex items-center",children:[(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",className:"w-6 h-6 mr-1 text-gray-500",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v12m-3-2.818l.879.659c1.171.879 3.07.879 4.242 0 1.172-.879 1.172-2.303 0-3.182C13.536 12.219 12.768 12 12 12c-.725 0-1.45-.22-2.003-.659-1.106-.879-1.106-2.303 0-3.182s2.9-.879 4.006 0l.415.33M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,s.jsx)("input",{className:"".concat("w-full h-6 border-none bg-transparent base1 outline-none placeholder:text-n-4/50 w-[17rem]"," lg:w-full"),type:"number",name:"number",placeholder:"Please enter the payment amount",value:o,onChange:e=>{let t=e.target.value;if(t.indexOf("-")>-1)return c(10),!1;c(t)},onBlur:()=>{o<10&&c(10),String(o).indexOf(".")>-1&&c(parseInt(String(o).split(".")[0]))},required:!0,step:"1"})]})})]})}),(0,s.jsxs)("div",{className:"mb-6 flex items-center",children:[(0,s.jsx)("div",{className:"flex base2  ",children:(0,s.jsx)("div",{className:"mr-auto dark:text-n-4 w-[6rem] text-right opacity-0"})}),(0,s.jsx)("div",{className:"ml-4",children:[20,50,100,300,500,1e3].map((e,t)=>(0,s.jsxs)("button",{type:"button",onClick:()=>{c(e)},className:"rounded bg-indigo-50 w-16 py-1 text-sm font-semibold  shadow-sm hover:bg-indigo-100 text-n-9 mr-4 button_key sm:mr-2.5 sm:w-14 mt-3 ".concat(ep().sw_buttonlast),children:["$",e]},t))})]}),(0,s.jsxs)("div",{className:"flex items-start mb-3 ",children:[(0,s.jsxs)("div",{className:"mr-4  dark:text-n-4 w-[6rem] text-right base2",children:[H.RECHARGE_PAYMENT_METHOD[u]||H.RECHARGE_PAYMENT_METHOD.en,":"]}),(0,s.jsx)("div",{className:"flex-1",children:t.length>0&&(0,s.jsx)(eh,{items:t,value:r,setValue:n})})]}),(0,s.jsx)(ex,{amount:o,disabled:d,onClick:()=>k()})]}),1===b&&(0,s.jsx)(eb,{}),d&&(0,s.jsx)(_.Z,{})]})};var ev=l(69926);let ej=e=>{let{className:t,visible:l,mode:r,me:n,overCallBack:o,onHideRightSidebar:c,hideRight:d}=e,[m,h]=(0,a.useState)(0),[g,p]=(0,a.useState)(!1),{chatHistory:b,setChatHistory:v}=(0,a.useContext)(z.py),{selectedTopicInfo:j,setSelectedTopicInfo:_}=(0,a.useContext)(z.py),{currentChat:k,setCurrentChat:T}=(0,a.useContext)(z.py),{isMessageSent:E,setMessageSent:S}=(0,a.useContext)(z.py),{activeChat:C,setActiveChat:I}=(0,a.useContext)(z.py),{setIsParamsEditable:O}=(0,a.useContext)(z.py),[R,A]=(0,a.useState)(!1),{language:{browserLanguage:F}}=(0,w.v9)(e=>e),{userInfo:{globalOrgId:Z}}=(0,w.v9)(e=>e),[L,P]=(0,a.useState)("0");(0,y.hu)(n,"right");let B=(0,w.I0)();(0,G.Z)(()=>{B((0,M.rI)(""))});let{modelData:D,chatModelParams:Y}=(0,w.v9)(e=>e.model),{imagesModelData:Q,imagesChatModelParams:q}=(0,w.v9)(e=>e.imagesModel),el="images"===r?q.find(e=>e.cat_id===Q.cat_id&&e.model_id===Q.model_id):Y.find(e=>e.cat_id===D.cat_id&&e.model_id===D.model_id),es=()=>{B((0,M.yA)()),B((0,K.Hr)({page:r,status:"new_chat"})),"images"===r?B((0,K.N_)({id:"",title:null,model:null==el?void 0:el.model_id,category:null==el?void 0:el.cat_id,params:{},params_def:[],created_at:"",user_message:"",images:{}})):B((0,K.fb)({conversations:[],topic:{id:"",model:null==el?void 0:el.model_id,category:null==el?void 0:el.cat_id,title:"",params:{},params_def:[]}}))};(0,a.useEffect)(()=>{b.length>0&&P("1")},[b]);let ea=async()=>{console.log(Z,"getTopicList");try{let e=await("search"===r?(0,N.Rv)(Z):"chat"===r?(0,N.BB)(Z):(0,N.QW)(Z));e.success?(0===e.data.length?P("2"):P("1"),v(e.data)):P("2")}catch(e){}};(0,a.useEffect)(()=>{console.log(Z,"RightSidebar globalOrgId"),Z&&ea()},[Z]);let er=(0,a.useRef)(j);(0,a.useEffect)(()=>{let e=er.current.tid!==j.tid&&er.current.tid!==j.altTid,t=er.current.tid===j.altTid;e&&v(e=>{let t=e.map(e=>e.id===C?{...e,chat:k}:e);return t}),t&&v(e=>{let t=e.map(e=>e.id===j.altTid?{...e,id:j.tid,isNewTopic:!1}:e);return t}),er.current=j},[j]);let en=(e,t)=>{e.isNewTopic&&(console.log("当前是新创建的聊天窗口需要重新设置一下默认模型"),es()),"images"!=r&&(_({...j,tid:e.id,isNewTopic:void 0!==e.isNewTopic&&e.isNewTopic,isTidTemp:!1,altTid:-1,titleGen:!0,historyClear:!0}),S(!0)),I(e.id),T(e?e.chat:e),B((0,K.Hr)({page:r,status:"dialogue"})),B((0,M.yA)()),o()},ei=async e=>{U.Am.dismiss(e.id);try{let e=await("search"===r?(0,N.Yy)(Z):"chat"===r?(0,N.TF)(Z):(0,N.lU)(Z));e.success&&(P("2"),_({tid:-1,isTidTemp:!1,isNewTopic:!0,altTid:-1,titleGen:!1,clearConvs:!0}),v([]),eo(),B((0,K.Hr)({page:r,status:"new_chat"})))}catch(e){console.error("删除历史记录失败: ",e)}},eo=e=>{0==e&&(console.log("length = 0"),P("2"),_({tid:-1,isTidTemp:!1,isNewTopic:!0,altTid:-1,titleGen:!1,clearConvs:!0}),v([]),S(!1)),O(!0),S(!1),es(),o();let t=Math.random();_({...j,tid:t,isTidTemp:!0,isNewTopic:!0,altTid:-1,titleGen:!1,clearConvs:!0}),I(t)},ed=(0,ev.Yz)(b.map((e,t)=>e={...e,index:t}),{key:e=>e.id,from:{opacity:1,transform:"translateX(0%)"},enter:{opacity:1,transform:"translateX(0%)"},leave:{opacity:0,transform:"translateX(100%)"},immediate:!(b.length>1)});return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:(0,i.m)("absolute top-0 right-0 bottom-0 flex flex-col w-[22.5rem] pt-[4rem]  bg-n-1 rounded-r-[1.25rem] border-l border-n-3 shadow-[inset_0_1.5rem_3.75rem_rgba(0,0,0,0.1)] 2xl:w-80 lg:rounded-[1.25rem] lg:invisible lg:opacity-0 lg:transition-opacity lg:z-20 lg:border-l-0 lg:shadow-2xl md:fixed md:w-[calc(100%-4rem)] md:border-l md:rounded-none dark:bg-n-6 dark:border-n-5 ".concat(l&&"lg:visible lg:opacity-100"," ").concat(t," ").concat(d&&"w-0 overflow-hidden opacity-0")),children:[(0,s.jsxs)("div",{className:"absolute top-0 left-0 right-0 flex items-center h-18 px-9 border-b border-n-3 lg:pr-18 md:pr-16 dark:border-n-5 justify-between",children:[(0,s.jsx)(u(),{minWidth:1023,children:(0,s.jsx)("button",{className:"group tap-highlight-color",onClick:()=>c(),children:(0,s.jsx)(x.Z,{className:"fill-n-4 transition-colors group-hover:fill-n-5",name:"toggle-on"})})}),(0,s.jsxs)("div",{className:"flex items-center justify-end flex-1",children:[(0,s.jsx)(J,{me:n,handleNewChatClick:()=>eo()}),(0,s.jsx)("button",{className:"btn-dark btn-medium",onClick:()=>A(!0),children:H.RECHARGE_NAME[F]||H.RECHARGE_NAME.en})]})]}),"chat"===r||"images"===r?(0,s.jsx)("div",{className:"mx-6 my-3 mt-5",style:{border:"1px solid #",borderRadius:"10px",boxShadow:" 2px 2px 10px rgba(0,0,0,.3)"},children:(0,s.jsx)(et,{setActiveIndex:h,activeIndex:m})}):(0,s.jsx)("div",{className:"p-3"}),0===m?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:" left-0 right-0 flex items-center px-9 md:px-6 pb-1",children:[(0,s.jsx)("div",{className:"base2 text-n-4/75",children:H.HOME_RIGHT_HISTORY_MESSAGE[F]||H.HOME_RIGHT_HISTORY_MESSAGE.en}),(0,s.jsx)("div",{className:"ml-3 px-2 bg-n-3 rounded-lg caption1 text-n-4 dark:bg-n-5/50"}),b&&0!=b.length&&(0,s.jsxs)("button",{className:"group relative ml-auto text-0",onClick:()=>(0,U.Am)(e=>(0,s.jsxs)(V.Z,{className:"md:flex-col md:items-center md:px-10",iconDelete:!0,children:[(0,s.jsx)("div",{className:"ml-3 mr-6 h6 md:mx-0 md:my-2",children:"Clear all history?"}),(0,s.jsxs)("div",{className:"flex justify-center",children:[(0,s.jsx)("button",{className:"btn-stroke-light btn-medium md:min-w-[6rem]",onClick:()=>U.Am.dismiss(e.id),children:"Cancel"}),(0,s.jsx)("button",{className:"btn-blue btn-medium ml-3 md:min-w-[6rem]",onClick:()=>ei(e),children:"Yes"})]})]}),{duration:1e4}),children:[(0,s.jsx)(x.Z,{className:"w-5 h-5 fill-n-4 transition-colors group-hover:fill-accent-1",name:"trash"}),(0,s.jsx)("div",{className:"absolute min-w-[8rem] top-1/2 -translate-y-1/2 right-full mr-2 px-2 py-1 rounded-lg bg-n-7 caption1 text-n-1 invisible opacity-0 transition-opacity pointer-events-none lg:hidden after:absolute after:top-1/2 after:left-full after:-translate-y-1/2 after:w-0 after:h-0 after:border-t-4 after:border-l-4 after:border-b-4 after:border-r-4 after:border-r-transparent after:border-l-n-7 after:border-t-transparent after:border-b-transparent group-hover:opacity-100 group-hover:visible",children:"Clear History"})]})]}),(0,s.jsxs)("div",{className:"history overflow-y-auto pb-[4.5rem]  ",children:[(0,s.jsxs)("div",{className:"grow  px-6 md:px-3 overflow-y-auto overflow-x-hidden h-full scrollbar-test",children:["0"==L&&(0,s.jsx)($,{}),"1"==L&&b&&b.length>0&&ed((e,t)=>(0,s.jsx)(ev.q.div,{style:{...e,position:"relative"},children:(0,s.jsx)(X,{item:t,index:t.index,mode:r,onClick:()=>en(t),onDeleteClick:e=>eo(e)},t.id)})),"2"==L&&(0,s.jsx)(ee,{})]}),(0,s.jsx)("div",{className:"absolute left-0 right-0 bottom-0 px-6 py-3 bg-white dark:bg-n-6 rounded-br-[1.25rem] lg:rounded-[1.25rem] md:rounded-none",children:(0,s.jsxs)("button",{className:"btn-blue w-full",onClick:()=>{eo(),"search"!=r&&h(1)},children:[(0,s.jsx)(x.Z,{name:"plus"}),(0,s.jsxs)("span",{children:["  ",H.HOME_RIGHT_BOTTOM_NEWCHAT[F]||H.HOME_RIGHT_BOTTOM_NEWCHAT.en]})]})})]})]}):(0,s.jsx)(ec,{mode:r})]}),(0,s.jsx)(W.Z,{visible:g,onClose:()=>p(!1),currentChat:k}),(0,s.jsx)(f.Z,{className:"md:!p-0",classWrap:"max-w-[54rem] md:min-h-screen-ios md:rounded-none dark:bg-n-7",classButtonClose:"hidden md:block md:absolute md:top-5 md:right-5 dark:fill-n-4",classOverlay:"md:bg-n-1",visible:R,onClose:()=>A(!1),children:R&&(0,s.jsx)(ef,{})})]})},e_=e=>{let{className:t,onClick:l,visibleRightSidebar:r}=e,[n,i]=(0,a.useState)(!1);return(0,a.useEffect)(()=>{i(!0)},[]),n?(0,s.jsx)(u(),{maxWidth:1023,children:(0,s.jsxs)("button",{className:"relative z-[25] shrink-0 flex flex-col items-center justify-center w-8 h-8 my-5 ml-auto mr-6 tap-highlight-color md:absolute md:top-5 md:right-4 md:m-0 ".concat(r?"md:!fixed":""," ").concat(t),onClick:l,children:[(0,s.jsx)("span",{className:"w-5 h-0.5 my-0.5 bg-n-7 rounded-full transition-all dark:bg-n-4 ".concat(r&&"translate-y-0.75 rotate-45")}),(0,s.jsx)("span",{className:"w-5 h-0.5 my-0.5 bg-n-7 rounded-full transition-all dark:bg-n-4 ".concat(r&&"-translate-y-0.75 -rotate-45")})]})}):null},eN=e=>{let{showClose:t,smallSidebar:l,hideRightSidebar:r,hideLeftSidebar:c,backUrl:h,me:g,children:p,rightSidebarMode:b}=e,f=localStorage.getItem("RIGHT_HIDE_STATUS"),v=localStorage.getItem("LEFT_HIDE_STATUS"),[j,_]=(0,a.useState)(v?"true"===v:l||!1),[N,w]=(0,a.useState)(!1),[k,T]=(0,a.useState)("true"===f),E=(0,m.useMediaQuery)({query:"(max-width: 1179px)"});(0,y.hu)(g,"拿去不到 me的信息Layout");let S=e=>{w(!1),(0,o.clearQueueScrollLocks)(),(0,o.enablePageScroll)(),"history"!=e&&_(!0)};return(0,a.useEffect)(()=>{console.log(E,"isDesktop"),v?_("true"===v):_(l||E)},[E,l,v]),(0,s.jsxs)(z.dF,{children:[(0,s.jsx)(d(),{children:(0,s.jsx)("title",{children:"theb.ai"})}),(0,s.jsxs)("div",{className:"pr-6 bg-n-7 md:p-0 md:bg-n-1 dark:md:bg-n-6 md:overflow-hidden ".concat(j?"pl-24 md:pl-0":l?"pl-24 md:pl-0":"pl-80 xl:pl-24 md:pl-0"),children:[(0,s.jsx)(u(),{minWidth:1024,onChange:e=>{_(!e)}}),!c&&(0,s.jsx)(D,{value:j,setValue:_,visibleRightSidebar:N,smallSidebar:l,me:g}),(0,s.jsx)("div",{className:"flex py-6 md:py-0 ".concat(r?"min-h-screen min-h-screen-ios":"h-screen h-screen-ios"),children:(0,s.jsxs)("div",{className:"relative flex grow max-w-full bg-n-1 rounded-[1.25rem] md:rounded-none dark:bg-n-6 ".concat(!r&&!k&&"pr-[22.5rem] 2xl:pr-80 lg:pr-0"),children:[(0,s.jsxs)("div",{className:"relative flex flex-col grow max-w-full ".concat(!r&&"md:pt-18"),children:[!r&&(0,s.jsx)(e_,{visibleRightSidebar:N,onClick:()=>{w(!N)}}),k&&(0,s.jsx)(u(),{minWidth:1023,children:(0,s.jsx)("button",{className:"group tap-highlight-color absolute top-5 right-4 cursor-pointer z-30",onClick:()=>{T(!1),localStorage.setItem("RIGHT_HIDE_STATUS","false")},children:(0,s.jsx)(x.Z,{className:"fill-n-4 transition-colors group-hover:fill-n-5",name:"toggle-off"})})}),r&&l||t&&(0,s.jsx)(n(),{className:"absolute top-6 right-6 flex justify-center items-center w-10 h-10 border-2 border-n-4/25 rounded-full text-0 transition-colors hover:border-transparent hover:bg-n-4/25",href:h||"/home",children:(0,s.jsx)(x.Z,{className:"fill-n-4",name:"close"})}),p]}),!r&&(0,s.jsx)(ej,{className:"\n                                ".concat(!j&&"md:translate-x-64 md:before:absolute md:before:z-30 md:before:inset-0","\n                            "),visible:N,mode:b,me:g,overCallBack:()=>{S("history")},onHideRightSidebar:()=>{console.log("用户请求缩小右边内容"),T(!0),localStorage.setItem("RIGHT_HIDE_STATUS","true")},hideRight:k})]})}),(0,s.jsx)("div",{className:(0,i.m)("fixed inset-0 z-10 bg-n-7/80 invisible opacity-0 md:hidden ".concat(!j&&l||N&&"visible opacity-100")),onClick:()=>{S()}})]})]})};var ew=eN},7938:function(e,t,l){"use strict";var s=l(85893),a=l(67294),r=l(38373),n=l.n(r),i=l(66180),o=l(86892);let c=()=>{let[e,t]=(0,a.useState)(!1);return(0,o.Z)(()=>{let e=window.matchMedia("(prefers-color-scheme: dark)");t(e.matches);let l=()=>t(e.matches);return e.addEventListener("change",l),()=>{console.log("卸载了？"),e.removeEventListener("change",l)}}),(0,s.jsx)("div",{className:n().sw_loading,children:(0,s.jsxs)("svg",{className:(0,i.m)(n().sw,"w-18 h-18"),viewBox:"0 0 128 128",xmlns:"http://www.w3.org/2000/svg",children:[(0,s.jsx)("defs",{children:(0,s.jsxs)("linearGradient",{id:"pl-grad",x1:"0",y1:"0",x2:"0",y2:"1",children:[(0,s.jsx)("stop",{offset:"0%",stopColor:"hsl(193,90%,55%)"}),(0,s.jsx)("stop",{offset:"100%",stopColor:"hsl(223,90%,55%)"})]})}),(0,s.jsx)("circle",{className:e?n().sw_ring_dark:n().sw_ring,r:"56",cx:"64",cy:"64",fill:"none",stroke:"hsla(0,10%,10%,0.1)",strokeWidth:"16",strokeLinecap:"round"}),(0,s.jsx)("path",{className:n().sw_worm,d:"M92,15.492S78.194,4.967,66.743,16.887c-17.231,17.938-28.26,96.974-28.26,96.974L119.85,59.892l-99-31.588,57.528,89.832L97.8,19.349,13.636,88.51l89.012,16.015S81.908,38.332,66.1,22.337C50.114,6.156,36,15.492,36,15.492a56,56,0,1,0,56,0Z",fill:"none",stroke:"url(#pl-grad)",strokeWidth:"16",strokeLinecap:"round",strokeLinejoin:"round",strokeDasharray:"44 1111",strokeDashoffset:"10"})]})})};t.Z=c},20104:function(e,t,l){"use strict";var s=l(85893),a=l(41664),r=l.n(a),n=l(67294),i=l(9892);let o=e=>{let{className:t,dark:l,onClick:a}=e,[o,c]=(0,n.useState)(!1);return(0,n.useEffect)(()=>{let e=window.matchMedia("(prefers-color-scheme: dark)");c(e.matches);let t=()=>c(e.matches);return e.addEventListener("change",t),()=>e.removeEventListener("change",t)},[]),(0,s.jsx)(r(),{className:"flex w-[11.88rem] ".concat(t),href:"/",onClick:a,children:(0,s.jsx)(i.Z,{className:"w-full h-auto",src:l?"/images/theb.ai4.svg":"/images/theb-ai.svg",width:190,height:40,alt:"Brainwave"})})};t.Z=o},26970:function(e,t,l){"use strict";var s=l(85893),a=l(67294),r=l(11355),n=l(18968),i=l(66180),o=l(44319);let c=e=>{let{className:t,classWrap:l,classOverlay:c,classButtonClose:d,visible:m,onClose:u,initialFocus:h,children:x,video:g}=e,p=e=>{e.stopPropagation()};return(0,s.jsx)(r.u,{show:m,as:a.Fragment,children:(0,s.jsxs)(n.V,{initialFocus:h,className:"fixed inset-0 z-50 flex p-6 overflow-auto scroll-smooth md:px-4 ".concat(t),onClose:u,children:[(0,s.jsx)(r.u.Child,{as:a.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,s.jsx)("div",{className:"fixed inset-0 ".concat(g?"bg-n-7/95":"bg-n-7/75 dark:bg-n-6/90"," ").concat(c),"aria-hidden":"true"})}),(0,s.jsx)(r.u.Child,{as:a.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 ".concat(!g&&"scale-95"),enterTo:"opacity-100 ".concat(!g&&"scale-100"),leave:"ease-in duration-200",leaveFrom:"opacity-100 ".concat(!g&&"scale-100"),leaveTo:"opacity-0 ".concat(!g&&"scale-95"),children:(0,s.jsxs)(n.V.Panel,{className:(0,i.m)("relative z-10 max-w-[37.5rem] w-full m-auto bg-n-1 rounded-3xl dark:bg-n-7 ".concat(g&&"static max-w-[64rem] aspect-video rounded-[1.25rem] bg-n-7 overflow-hidden shadow-[0_2.5rem_8rem_rgba(0,0,0,0.5)]"," ").concat(l)),onClick:p,children:[x,(0,s.jsx)("button",{className:(0,i.m)("text-0 fill-n-7 hover:fill-primary-1 ".concat(g&&"absolute top-6 right-6 w-10 h-10 bg-n-1 rounded-full"," ").concat(d)),onClick:u,children:(0,s.jsx)(o.Z,{className:"fill-inherit transition-colors",name:"close"})})]})})]})})};t.Z=c},98354:function(e,t,l){"use strict";var s=l(85893),a=l(67294);l(86501);var r=l(26970);l(43709);var n=l(93162),i=l(59335);let o=e=>{let{visible:t,onClose:l,currentChat:o}=e,[c,d]=(0,a.useState)(!1),[m,u]=(0,a.useState)("PDF"),[h]=(0,a.useState)([{value:"PDF",label:"PDF"},{value:"markdown",label:"markdown"},{value:"json",label:"json"},{value:"csv",label:"csv"}]),x=()=>{let e;switch(m){case"JSON":e=new Blob([JSON.stringify(o)],{type:"text/json;charset=utf-8"});break;case"CSV":let t=o.map(e=>"".concat(e.id,", ").concat(e.user,", ").concat(e.text)).join("\n");e=new Blob([t],{type:"text/csv;charset=utf-8"});break;case"Markdown":let l=o.map(e=>"".concat(e.user,": ").concat(e.text)).join("\n");e=new Blob([l],{type:"text/markdown;charset=utf-8"});break;case"PDF":e=new Blob([JSON.stringify(o)],{type:"application/pdf"});break;default:return}(0,n.saveAs)(e,"chat_export_".concat(new Date().toISOString(),".").concat(m.toLowerCase()))},g=(0,a.useRef)(null);return(0,s.jsx)(r.Z,{classWrap:"max-w-[40rem]",classButtonClose:"absolute top-6 right-6 w-10 h-10 rounded-full bg-n-2 md:top-5 md:right-5 dark:bg-n-4/25 dark:fill-n-4 dark:hover:fill-n-1",visible:t,onClose:l,initialFocus:g,children:(0,s.jsxs)("form",{className:"p-12 md:p-5",action:"",children:[(0,s.jsx)("div",{className:"mb-8 h4",children:"Export this chat"}),(0,s.jsx)(i.Select,{color:"light-blue",onChange:e=>u(e),value:m,children:h.map(e=>(0,s.jsx)(i.Option,{value:e.value,children:e.label},e.value))}),(0,s.jsxs)("div",{className:"flex justify-end",children:[(0,s.jsx)("button",{className:"btn-stroke-light mr-3",onClick:l,children:"Cancel"}),(0,s.jsx)("button",{className:"btn-blue",onClick:x,children:"Export"})]})]})})};t.Z=o},78270:function(e,t,l){"use strict";var s=l(85893),a=l(64729),r=l(11355),n=l(66180),i=l(44319),o=l(67294);let c=e=>{let{label:t,title:l,icon:c,className:d,classButton:m,classArrow:u,classOptions:h,classOption:x,classIcon:g,placeholder:p,items:b,value:f,onChange:v,small:j,up:_}=e;return(0,s.jsxs)("div",{className:"relative ".concat(d),children:[t&&(0,s.jsx)("div",{className:"flex mb-2 base2 font-semibold",children:t}),(0,s.jsx)(a.R,{value:f,onChange:v,children:e=>{let{open:t}=e;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(a.R.Button,{className:(0,n.m)("flex items-center w-full h-[3.25rem] px-4 rounded-xl bg-n-1 base2 outline-none tap-highlight-color ".concat(j?"h-9 pr-3 rounded-md shadow-[0_0.125rem_0.25rem_rgba(0,0,0,0.15)] dark:shadow-[0_0.125rem_0.25rem_rgba(0,0,0,0.15),inset_0_0_0_0.0625rem_rgba(254,254,254,.1)] dark:bg-n-6 ".concat(t&&"shadow-[0_0.125rem_0.25rem_rgba(0,0,0,0.15)]"):"shadow-[inset_0_0_0_0.0625rem_#E8ECEF] dark:shadow-[inset_0_0_0_0.0625rem_#343839] dark:bg-transparent ".concat(t&&"!shadow-[inset_0_0_0_0.125rem_#0084FF]")," ").concat(m)),children:[l&&(0,s.jsx)("div",{className:"shrink-0 mr-2 pr-2 border-r border-n-3 text-n-4 dark:border-n-4/50",children:l}),c&&(0,s.jsx)(i.Z,{className:"shrink-0 mr-2 dark:fill-n-4 ".concat(j&&"w-5 h-5 mr-1.5"," ").concat(g),name:c}),(null==f?void 0:f.color)&&(0,s.jsx)("div",{className:"shrink-0 w-3.5 h-3.5 ml-1 mr-4 rounded",style:{backgroundColor:f.color}}),(null==f?void 0:f.icon)&&(0,s.jsx)(i.Z,{className:"w-5 h-5 mr-3 dark:fill-n-1",name:f.icon}),(0,s.jsx)("span",{className:"mr-auto truncate ".concat(j&&"font-semibold"),children:f?f.name||f.title:(0,s.jsx)("span",{className:"text-n-4",children:p})}),(0,s.jsx)(i.Z,{className:"shrink-0 ml-2 transition-transform dark:fill-n-1 ".concat(t&&"rotate-180"," ").concat(j&&"ml-1"," ").concat(u),name:"arrow-down"})]}),(0,s.jsx)(r.u,{leave:"transition ease-in duration-100",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,s.jsx)(a.R.Options,{className:(0,n.m)("absolute left-0 right-0 w-full mt-2 p-2 bg-n-1 rounded-lg shadow-[0_0_1rem_0.25rem_rgba(0,0,0,0.04),0_2rem_2rem_-1.5rem_rgba(0,0,0,0.1),inset_0_0_0_0.0625rem_#E8ECEF] outline-none dark:shadow-[0_0_1rem_0.25rem_rgba(0,0,0,0.04),0_2rem_2rem_-1.5rem_rgba(0,0,0,0.1),inset_0_0_0_0.0625rem_#343839] dark:bg-n-6 ".concat(j&&"right-auto mt-1 shadow-md"," ").concat(_&&"top-auto bottom-full mt-0 ".concat(j?"mb-1":"mb-2")," ").concat(t&&"z-20"," ").concat(h,"    max-h-60  overflow-auto rounded-md  py-1 text-base shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none sm:text-sm")),children:b.map(e=>e.bigTitle?(0,s.jsx)(o.Fragment,{},e.id):(0,s.jsxs)(a.R.Option,{className:"flex items-start p-2 rounded-lg base2 text-n-4 transition-colors cursor-pointer hover:text-n-7 ui-selected:!bg-n-3/50 ui-selected:!text-n-7 tap-highlight-color dark:hover:text-n-3 dark:ui-selected:!bg-n-7 dark:ui-selected:!text-n-1 ".concat(j&&"py-1 font-semibold"," ").concat(x),value:e,children:[e.color&&(0,s.jsx)("div",{className:"shrink-0 w-3.5 h-3.5 mt-[0.3125rem] ml-1 mr-4 rounded",style:{backgroundColor:e.color}}),e.icon&&(0,s.jsx)(i.Z,{className:"w-5 h-5 mt-0.5 mr-3 dark:fill-n-1",name:e.icon}),(0,s.jsx)("div",{className:"mr-auto",children:e.name||e.title}),!j&&(0,s.jsx)(i.Z,{className:"hidden w-5 h-5 ml-2 mt-0.5 fill-n-7 ui-selected:inline-block dark:fill-n-1",name:"check-thin"})]},e.id))})})]})}})]})};t.Z=c},68295:function(e,t,l){"use strict";l.d(t,{Hf:function(){return o},dF:function(){return n},py:function(){return i}});var s=l(85893),a=l(67294);let r=(0,a.createContext)(),n=e=>{let{children:t}=e,[l,n]=(0,a.useState)(!0);return(0,a.useEffect)(()=>{let e=localStorage.getItem("enableListener");n(null===e||JSON.parse(e))},[]),(0,a.useEffect)(()=>{localStorage.setItem("enableListener",JSON.stringify(l))},[l]),(0,s.jsx)(r.Provider,{value:{enableListener:l,setEnableListener:n},children:t})},i=(0,a.createContext)({isMessageSent:!1,setMessageSent:()=>{},activeChatId:null,setActiveChatId:()=>{},activeChatIndex:null,setActiveChatIndex:()=>{},isTitleGenerating:!1,setIsTitleGenerating:()=>{},currentOrgId:null,setCurrentOrgId:()=>{},isErrorOccurred:!1,setErrorOccurred:()=>{},chatHistory:[],setChatHistory:e=>{},currentChat:[],setCurrentChat:e=>{},activeChat:null,setActiveChat:e=>{},selectedModel:null,setSelectedModel:e=>{},selectedModelname:null,setSelectedModelname:e=>{},selectModel:null,setSelectModel:()=>{},viewSetting:!1,setViewSetting:e=>{},modelParams:{},setModelParams:e=>{},isModelDialogOpen:!1,setIsModelDialogOpen:e=>{},selectedModelParams:null,setSelectedModelParams:()=>{},currentTid:null,setCurrentTid:e=>{},selectedTopicInfo:{tid:-1,isTidTemp:!1,isNewTopic:!0,altTid:-1,titleGen:!1,clearConvs:!0},setSelectedTopicInfo:e=>{},newChatFlag:!1,setNewChatFlag:e=>{},isFirstResponseReceived:!1,setFirstResponseReceived:()=>{},lastTid:null,setLastTid:e=>{},loadingTid:!1,setLoadingTid:()=>{},tempId:null,setTempId:e=>{},isActive:!1,setIsActive:e=>{},message:"",setMessage:e=>{},isParamsEditable:!0,setIsParamsEditable:()=>{},paramsInitialized:!1,setParamsInitialized:()=>{},chatTitle:[],setChatTitle:()=>{},searchTitle:[],setSearchTitle:()=>{}}),o=e=>{let{children:t}=e,[l,r]=(0,a.useState)([]),[n,o]=(0,a.useState)([]),[c,d]=(0,a.useState)(!1),[m,u]=(0,a.useState)(!0),[h,x]=(0,a.useState)(!1),[g,p]=(0,a.useState)(""),[b,f]=(0,a.useState)(!1),[v,j]=(0,a.useState)([]),[_,N]=(0,a.useState)([]),[w,y]=(0,a.useState)(null),[k,T]=(0,a.useState)(null),[E,S]=(0,a.useState)([]),[C,I]=(0,a.useState)(null),[O,R]=(0,a.useState)(null),[H,A]=(0,a.useState)(null),[M,G]=(0,a.useState)(null),[F,Z]=(0,a.useState)(!1),[L,P]=(0,a.useState)({}),[B,z]=(0,a.useState)(!1),[D,U]=(0,a.useState)(null),[W,V]=(0,a.useState)(null),[Y,Q]=(0,a.useState)(!0),[q,J]=(0,a.useState)(null),[K,X]=(0,a.useState)({tid:-1,isNewTopic:!0,isTidTemp:!0,altTid:-1,titleGen:!1,clearConvs:!0}),[$,ee]=(0,a.useState)(!1),[et,el]=(0,a.useState)(!1),[es,ea]=(0,a.useState)(!1),[er,en]=(0,a.useState)(!1),[ei,eo]=(0,a.useState)(!1),[ec,ed]=(0,a.useState)(null),[em,eu]=(0,a.useState)(!1),[eh,ex]=(0,a.useState)(null);return(0,s.jsx)(i.Provider,{value:{searchTitle:n,setSearchTitle:o,chatTitle:l,setChatTitle:r,paramsInitialized:c,setParamsInitialized:d,isParamsEditable:m,setIsParamsEditable:u,message:g,setMessage:p,isActive:h,setIsActive:x,isMessageSent:b,setMessageSent:f,tempId:M,setTempId:G,activeChatId:w,setActiveChatId:y,activeChatIndex:k,setActiveChatIndex:T,isTitleGenerating:er,setIsTitleGenerating:en,currentOrgId:eh,setCurrentOrgId:ex,isErrorOccurred:em,setErrorOccurred:eu,loadingTid:ei,setLoadingTid:eo,lastTid:ec,setLastTid:ed,isFirstResponseReceived:es,setFirstResponseReceived:ea,selectedTopicInfo:K,setSelectedTopicInfo:X,isTitleGenerated:$,setIsTitleGenerated:ee,currentTid:q,setCurrentTid:J,selectModel:W,setSelectModel:V,selectedModelParams:D,setSelectedModelParams:U,chatHistory:v,setChatHistory:j,currentChat:_,setCurrentChat:N,newChat:E,setNewChat:S,activeChat:C,setActiveChat:I,selectedModel:O,setSelectedModel:R,selectedModelname:H,setSelectedModelname:A,viewSetting:F,setViewSetting:Z,modelParams:L,setModelParams:P,isModelDialogOpen:B,setIsModelDialogOpen:z,isNewChat:Y,setIsNewChat:Q,newChatFlag:et,setNewChatFlag:el},children:t})}},86892:function(e,t,l){"use strict";var s=l(67294);let a=e=>{let t=(0,s.useRef)(!1);(0,s.useEffect)(()=>{t.current||(t.current=!0,e())},[e])};t.Z=a},20947:function(e,t,l){"use strict";var s=l(9473),a=l(51222),r=l(86892),n=l(33631),i=l(62161),o=l(23330),c=l(11163),d=l(67556),m=l(635),u=l(67294);t.Z=function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];let e=(0,s.I0)(),t=(0,c.useRouter)(),l=async()=>{let t=await(0,o.n4)();t?(console.log("版本更新了"),e((0,i.Dg)()),e((0,a.XR)()),e((0,d.gQ)()),e((0,m.AW)())):e((0,i.Dg)())};(0,u.useEffect)(()=>{l()},[]),(0,r.Z)(async()=>{let l=async()=>{try{let l=await e((0,a.PG)());if(null!=l.payload){let{organizations:s}=l.payload,r="";s.length>0?r=localStorage.getItem("globalOrgId")||s[0].id:t.replace("/org_error"),console.log(r,"orgId"),e((0,a.IM)(r))}}catch(e){console.log(e,"error111")}};l(),(()=>{let t=navigator.language.substring(0,2),l=navigator.language.toLowerCase();("zh-hk"==l||"zh-tw"==l)&&(t="zh-ft");let s=localStorage.getItem("language");s?e((0,n.EK)(s)):(localStorage.setItem("language",t),e((0,n.EK)(t)))})()})}},38373:function(e){e.exports={sw_loading:"loading_sw_loading__wz9zV",sw:"loading_sw__JK0Do",sw_worm:"loading_sw_worm__FveMs",bump:"loading_bump__D_BMC",sw_ring:"loading_sw_ring__JMV3S",sw_ring_dark:"loading_sw_ring_dark__l5jN_",worm:"loading_worm__m_iUC"}},88107:function(e){e.exports={sw_buttonlast:"RechargeDetails_sw_buttonlast__IyhqN"}},19205:function(e){e.exports={settingsContainer:"Settings_settingsContainer__L3ZWL",fixedSize:"Settings_fixedSize__tPYrc",settingsItem:"Settings_settingsItem__PYjLk",box:"Settings_box__zTwsR",sliderLabel:"Settings_sliderLabel__O_Wf2",label:"Settings_label__z_vxF",input:"Settings_input__SR9sG",inputs:"Settings_inputs__CxkKn"}}}]);